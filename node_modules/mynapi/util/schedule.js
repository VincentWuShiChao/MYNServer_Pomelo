/**
 * Created by Administrator on 2018/9/3.
 */
/**
 * 定时任务
 */

var Schedule=require('node-schedule');

module.exports= function () {
    return new NodeSchedule();
};
class NodeSchedule{
    constructor(){
        console.log("创建定时任务实例");
    }
    dayOfWeek(day,hour,minute){//每周的某天的某时刻0或者7为周日
        let rule = new Schedule.RecurrenceRule();
        rule.dayOfWeek=[];
        rule.dayOfWeek.push(day);
        rule.hour = hour;
        rule.minute = minute;
        var j = Schedule.scheduleJob(rule, function(){
            console.log('Today is recognized by Rebecca Black!');
        });
    }
    minuteOfHour(minute){//每小时的minute分钟
        let rule = new Schedule.RecurrenceRule();
        rule.minute =minute;
        var j = Schedule.scheduleJob(rule, function(){
            console.log('The answer to life, the universe, and everything!');
        });
    }
    exactTime(year,month,day,hour,minute,second){//准确时间点
        var date = new Date(year, month-1, day, hour, minute, second);
        var j = Schedule.scheduleJob(date, function(){
            console.log('The world is going to end today.');
            //取消预设计划
            j.cancel();
        });

    }



}
